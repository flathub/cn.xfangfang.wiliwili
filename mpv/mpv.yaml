name: libmpv
buildsystem: meson
config-opts:
  - -Dalsa=enabled
  - -Dbuild-date=false
  - -Dcdda=enabled
  - -Dcplayer=false
  - -Dcplugins=enabled
  - -Dcuda-hwaccel=enabled
  - -Dcuda-interop=enabled
  - -Ddmabuf-wayland=enabled
  - -Ddrm=enabled
  - -Ddvbin=enabled
  - -Ddvdnav=enabled
  - -Degl-drm=enabled
  - -Degl-wayland=enabled
  - -Degl-x11=enabled
  - -Degl=enabled
  - -Dgbm=enabled
  - -Dgl-x11=enabled
  - -Dgl=enabled
  - -Diconv=enabled
  - -Djack=enabled
  - -Djavascript=disabled
  - -Djpeg=enabled
  - -Dlcms2=enabled
  - -Dlibarchive=enabled
  - -Dlibavdevice=enabled
  - -Dlibbluray=enabled
  - -Dlibmpv=true
  - -Dlua=disabled
  - -Dopenal=enabled
  - -Dpipewire=enabled
  - -Dplain-gl=enabled
  - -Dpulse=enabled
  - -Drubberband=enabled
  - -Dsdl2-audio=enabled
  - -Dsdl2-gamepad=enabled
  - -Dsdl2-video=enabled
  - -Dsdl2=enabled
  - -Duchardet=enabled
  - -Dvaapi-drm=enabled
  - -Dvaapi-wayland=enabled
  - -Dvaapi-x11=enabled
  - -Dvaapi=enabled
  - -Dvapoursynth=enabled
  - -Dvdpau-gl-x11=enabled
  - -Dvdpau=enabled
  - -Dvector=enabled
  - -Dvulkan=enabled
  - -Dwayland=enabled
  - -Dwerror=false
  - -Dx11=enabled
  - -Dxv=enabled
  - -Dzimg=enabled
  - -Dzlib=enabled
sources:
  - type: git
    url: https://github.com/mpv-player/mpv.git
    tag: v0.40.0
    commit: e48ac7ce08462f5e33af6ef9deeac6fa87eef01e
    x-checker-data:
      type: git
      tag-pattern: ^v([\d.]+)$

modules:
  - name: libXpresent
    buildsystem: autotools
    sources:
      - type: git
        url: https://gitlab.freedesktop.org/xorg/lib/libxpresent.git
        tag: libXpresent-1.0.1
        commit: 37507b5f44332accfb1064ee69a4f6a833994747
        x-checker-data:
          type: git
          tag-pattern: ^libXpresent-([\d.]+)$

  - name: libass
    config-opts:
      - --disable-static
    sources:
      - type: git
        url: https://github.com/libass/libass.git
        tag: 0.17.4
        commit: bbb3c7f1570a4a021e52683f3fbdf74fe492ae84
        x-checker-data:
          type: git
          tag-pattern: ^([\d.]+)$

  - name: uchardet
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
      - -DBUILD_STATIC=0
    sources:
      - type: git
        url: https://gitlab.freedesktop.org/uchardet/uchardet.git
        tag: v0.0.8
        commit: ae6302a016088ad07177f86d417b20010053632b
        x-checker-data:
          type: git
          tag-pattern: ^v([\d.]+)$
      - type: patch
        path: patches/uchardet-cmake.patch

  - name: libplacebo
    buildsystem: meson
    config-opts:
      - -Dvulkan=enabled
      - -Dshaderc=enabled
      - -Dd3d11=disabled
      - -Ddemos=false
    sources:
      - type: git
        url: https://code.videolan.org/videolan/libplacebo.git
        tag: v7.351.0
        commit: 3188549fba13bbdf3a5a98de2a38c2e71f04e21e
        x-checker-data:
          type: git
          tag-pattern: ^v([\d.]+)$
