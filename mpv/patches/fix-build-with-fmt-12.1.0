From 2b0f9915096af9f9611c2f83f4849468d7961740 Mon Sep 17 00:00:00 2001
From: Puqns67 <me@puqns67.icu>
Date: Thu, 9 Oct 2025 12:36:15 +0800
Subject: [PATCH] Replace fmt::localtime with std::localtime

---
 library/borealis/library/include/borealis/core/logger.hpp | 3 ++-
 library/borealis/library/lib/views/debug_layer.cpp        | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/library/borealis/library/include/borealis/core/logger.hpp b/library/borealis/library/include/borealis/core/logger.hpp
index 7efb49a10..ae73ad8a9 100644
--- a/library/borealis/library/include/borealis/core/logger.hpp
+++ b/library/borealis/library/include/borealis/core/logger.hpp
@@ -99,7 +99,8 @@ class Logger
         if (sceRtcGetCurrentClockLocalTime)
             sceRtcGetCurrentClockLocalTime(&lt);
 #else
-        std::tm time_tm = fmt::localtime(std::chrono::system_clock::to_time_t(now));
+        std::time_t time_t = std::chrono::system_clock::to_time_t(now);
+        std::tm time_tm = *std::localtime(&time_t);
 #endif
         std::string log = fmt::format(format, std::forward<Args>(args)...);
 
diff --git a/library/borealis/library/lib/views/debug_layer.cpp b/library/borealis/library/lib/views/debug_layer.cpp
index e19cf899c..bcb1f1639 100644
--- a/library/borealis/library/lib/views/debug_layer.cpp
+++ b/library/borealis/library/lib/views/debug_layer.cpp
@@ -54,7 +54,8 @@ DebugLayer::DebugLayer()
                 sceRtcGetCurrentClockLocalTime(&lt);
             std::string timeBase = fmt::format("{:02d}:{:02d}:{:02d}.{:03d}", lt.hour, lt.minute, lt.second, (int)ms);
 #else
-            std::tm time_tm = fmt::localtime(std::chrono::system_clock::to_time_t(now));
+            std::time_t time_t = std::chrono::system_clock::to_time_t(now);
+            std::tm time_tm = *std::localtime(&time_t);
             std::string timeBase = fmt::format("{:%H:%M:%S}.{:03d}", time_tm, (int)ms);
 #endif
 
